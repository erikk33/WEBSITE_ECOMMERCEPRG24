<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contact us</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    integrity="sha512iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.18/dist/sweetalert2.min.css">
  <style>
    /* CSS untuk popup */
    .popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #fff;
      border: 1px solid #ccc;
      padding: 20px;
      text-align: center;
      animation: pop 0.5s ease-out;
    }

    @keyframes pop {
      0% {
        transform: scale(0);
      }

      70% {
        transform: scale(1.2);
      }

      100% {
        transform: scale(1);
      }
    }

    .bubble {
      display: inline-block;
      width: 8px;
      height: 8px;
      background-color: #ff4d4d;
      border-radius: 50%;
      animation: swing-bubble 1s infinite ease-in-out;
    }

    @keyframes swing-bubble {
      0% {
        transform: translateX(-50%);
      }

      50% {
        transform: translateX(50%);
      }

      100% {
        transform: translateX(-50%);
      }
    }

    /* CSS untuk fireworks */
    @keyframes explode {
      0% {
        width: 0;
        height: 0;
        opacity: 1;
      }

      100% {
        width: 300px;
        height: 300px;
        opacity: 0;
      }
    }

    .fireworks {
      position: fixed;
      background-color: #ff4d4d;
      border-radius: 50%;
      animation: explode 1s;
      pointer-events: none;
    }

    /* CSS untuk simbol surat animasi */
    @keyframes send-mail {
      0% {
        transform: translateY(0);
        opacity: 0;
      }

      50% {
        transform: translateY(-30px);
        opacity: 1;
      }

      100% {
        transform: translateY(0);
        opacity: 0;
      }
    }

    .send-mail {
      font-size: 32px;
      color: #ff4d4d;
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      animation: send-mail 2s;
      pointer-events: none;
    }

    .send-mail.success {
      color: #00cc66; /* Warna hijau */
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="p-body">
      <div class="p-body-inner">
        <div class="p-body-header">
          <div class="p-title">
            <h1 class="p-title-value">Contact us</h1>
          </div>
        </div>
        <div class="p-body-main">
          <div class="p-body-contentCol">
            <div class="p-body-content">
              <div class="p-body-page-content">
                <form id="contactForm">
                  <div class="block-container">
                    <div class="block-body">
                      <dl class="form-row form-row-input">
                        <dt>
                          <div class="form-row-label">
                            <label for="name">Nama anda:</label>
                            <dfn class="form-row-hint">Diperlukan</dfn>
                          </div>
                        </dt>
                        <dd>
                          <input type="text" id="name" class="input" autofocus="autofocus">
                        </dd>
                      </dl>
                      <dl class="form-row form-row-input">
                        <dt>
                          <div class="form-row-label">
                            <label for="email">Alamat e-mail anda:</label>
                            <dfn class="form-row-hint">Diperlukan</dfn>
                          </div>
                        </dt>
                        <dd>
                          <input type="email" id="email" class="input" autofocus="autofocus">
                        </dd>
                      </dl>
                      <dl class="form-row form-row-input">
                        <dt>
                          <div class="form-row-label">
                            <label for="subject">Subject:</label>
                            <dfn class="form-row-hint">Diperlukan</dfn>
                          </div>
                        </dt>
                        <dd>
                          <input type="text" id="subject" class="input" autofocus="autofocus">
                        </dd>
                      </dl>
                      <dl class="form-row form-row-input">
                        <dt>
                          <div class="form-row-label">
                            <label for="message">Pesan:</label>
                            <dfn class="form-row-hint">Diperlukan</dfn>
                          </div>
                        </dt>
                        <dd>
                          <textarea id="message" class="input input-fit-height"
                            style="overflow: hidden; overflow-wrap: break-word; height: 119px;"></textarea>
                        </dd>
                      </dl>
                    </div>
                    <dl class="form-row form-submit-row">
                      <dt></dt>
                      <dd>
                        <div class="form-submit-row-main">
                          <div class="form-submit-row-bar">
                            <div class="form-submit-row-control">
                              <button type="submit" class="button-primary button" onclick="handleFireworks(event)">
                                <span class="button-text">Kirim</span>
                                <i class="fas fa-envelope send-mail"></i>
                              </button>
                            </div>
                          </div>
                        </div>
                      </dd>
                    </dl>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- SweetAlert2 library -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.18/dist/sweetalert2.min.js"></script>

  <script>
    const contactForm = document.getElementById('contactForm');
    const sendMailIcon = document.querySelector('.send-mail');

    contactForm.addEventListener('submit', function (e) {
      e.preventDefault();

      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      const subject = document.getElementById('subject').value;
      const message = document.getElementById('message').value;

      const data = {
        name,
        email,
        subject,
        message
      };

      // Mengirim data ke Mock API dengan metode POST menggunakan Fetch API
      fetch('https://64b3fb360efb99d862689dda.mockapi.io/Faq/V1/Pertanyaan', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
      })
        .then(response => response.json())
        .then(() => {
          // Menampilkan popup pesan berhasil dengan SweetAlert2
          Swal.fire({
            title: 'Pesan Terkirim',
            text: 'Data Anda telah berhasil dikirim ke Mock API.',
            icon: 'success',
            showConfirmButton: false,
            timer: 4000,
            onAfterClose: () => {
              contactForm.reset();
            }
          });

          // Mengubah warna simbol surat menjadi hijau selama 4 detik
          sendMailIcon.classList.add('success');
          setTimeout(() => {
            sendMailIcon.classList.remove('success');
          }, 4000);
        })
        .catch(error => {
          console.error(error);
          // Menampilkan popup pesan gagal dengan SweetAlert2
          Swal.fire({
            title: 'Kesalahan',
            text: 'Terjadi kesalahan saat mengirim data.',
            icon: 'error',
            showConfirmButton: true
          });
        });
    });

    function handleFireworks(event) {
      // Mendapatkan posisi klik tombol Kirim
      const x = event.clientX;
      const y = event.clientY;

      // Membuat element div untuk efek fireworks
      const fireworks = document.createElement('div');
      fireworks.className = 'fireworks';

      // Menambahkan element ke dalam body
      document.body.appendChild(fireworks);

      // Mengatur posisi fireworks sesuai dengan klik tombol Kirim
      fireworks.style.left = x - 150 + 'px';
      fireworks.style.top = y - 150 + 'px';

      // Menghapus element fireworks setelah 3 detik (delay)
      setTimeout(() => {
        document.body.removeChild(fireworks);
      }, 3000);
    }
  </script>
</body>

</html>
